MediathekCrawler.ResultView=function(){var a={},b=null,c=null,d=[],e=[],f=function(){e=[],b=$("#result-wrapper"),$("#alphabetic-sort").on("click",l),$("#duration-sort").on("click",m),$("#channel-sort").on("click",n),$("#date-sort").on("click",o),$("#hot-new-sort").on("click",p),r($("#channel").text()),$("#waiting").hide(),$(document).ajaxStart(function(){$("#waiting").show(),$("#content").css("overflow","hidden")}),$(document).ajaxStop(function(){$("#waiting").hide(),$("#content").css("overflow","auto")})},g=function(a){badge="new"==a._origin._badge?"badge-new":"hot"==a._origin._badge?"badge-hot":"badge-null";var c='<div class="video-item col-xs-12 col-sm-6 col-md-3 col-lg-2"><a href="/video/'+a._id+'">'+'<div class="col-xs-2 '+badge+'"></div>'+"<img src="+a._teaserImages[0]._url+' class="img-responsive">'+'<div class="video-item-description col-xs-12">'+'<div class="video-item-title">'+a._title+"</div>"+'<div  class="video-item-subtitle">'+a._subtitle+" &nbsp </div>"+'<div  class="video-item-time"><span>'+a._airtime+"</span> </div>"+'<div class="video-item-channel"><span>'+a._station+"</span> | <span>"+a._length+"</span></div>"+"</div>"+"</a>"+"</div>";b.append(c),a.length=0},h=function(a,b){for(i=0;i<a.length;i++)if(a[i]===b)return!1;return!0},j=function(a,b){if(0==b._id&&($(".carousel-indicators").empty(),$(".carousel-inner").empty(),$("#content").css("overflow","auto")),0==b._id){first=!1;var d='<div class="item active"><img src="'+b._teaserImages[0]._url+'" alt="'+b._title+'">'+'<div class="container">'+'<a href="/video/'+b._id+'">'+'<div class="carousel-caption">'+'<h3 style="margin-top: 0px;">'+b._title+"</h3>"+"<p>"+b._subtitle+"</p>"+"<p>"+q(b._station)+"</p>"+"</div>"+"</a>"+"</div>"+"</div>"}else if(h(e,b._station))var d='<div class="item"><img src="'+b._teaserImages[0]._url+'" alt="'+b._title+'">'+'<div class="container">'+'<a href="/video/'+b._id+'">'+'<div class="carousel-caption">'+'<h3 style="margin-top: 0px;">'+b._title+"</h3>"+"<p>"+b._subtitle+"</p>"+"<p>"+q(b._station)+"</p>"+"</div>"+"</a>"+"</div>"+"</div>";if(h(e,b._station)){var f='<li><img class="video-img" src="'+b._teaserImages[0]._url+'" alt="'+b._title+'">'+'<a href="/video/'+b._id+'">'+'<div class="carousel-caption">'+'<h3 style="margin-top: 0px;">'+b._title+"</h3>"+"<p>"+b._subtitle+"</p>"+"<p>"+q(b._station)+"</p>"+"</div>"+"</a>"+"</li>";$("#flipster ul").append(f)}e.push(b._station),$indicatorWrapper=$("#carousel-wrapper .carousel-indicators"),0==b._id?$indicatorWrapper.append('<li data-target="#myCarousel" data-slide-to="'+(b._id+1)+'" class="active"></li>'):$indicatorWrapper.append('<li data-target="#myCarousel" data-slide-to="'+(b._id+1)+'"></li>'),c=$("#carousel-wrapper .carousel-inner"),c.append(d)},k=function(){var a=localStorage.getItem("mediathek-crawler"),b=JSON.parse(a);return b},l=function(){var a=k()._results;"asc"==$("#alphabetic-sort").val()?($("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#alphabetic-sort").empty(),$("#alphabetic-sort").append('Alphabetisch <span id="hot-new-sort-up" class="glyphicon glyphicon-chevron-up"></span>'),a.sort(function(a,b){var c=a._title.toLowerCase(),d=b._title.toLowerCase();return d>c?-1:c>d?1:0}),$("#alphabetic-sort").val("desc")):($("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#alphabetic-sort").empty(),$("#alphabetic-sort").append('Alphabetisch <span id="hot-new-sort-down" class="glyphicon glyphicon-chevron-down"></span>'),a.sort(function(a,b){var c=a._title.toLowerCase(),d=b._title.toLowerCase();return d>c?1:c>d?-1:0}),$("#alphabetic-sort").val("asc")),b.empty(),a.forEach(function(a){g(a)})},m=function(){d=k()._results,"asc"==$("#duration-sort").val()?($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#duration-sort").empty(),$("#duration-sort").append('Dauer <span id="hot-new-sort-up" class="glyphicon glyphicon-chevron-up"></span>'),d.sort(function(a,b){var c=a._length.toLowerCase(),d=b._length.toLowerCase();return d>c?-1:c>d?1:0}),$("#duration-sort").val("desc")):($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#duration-sort").empty(),$("#duration-sort").append('Dauer <span id="hot-new-sort-down" class="glyphicon glyphicon-chevron-down"></span>'),d.sort(function(a,b){var c=a._length.toLowerCase(),d=b._length.toLowerCase();return d>c?1:c>d?-1:0}),$("#duration-sort").val("asc")),b.empty(),d.forEach(function(a){g(a)})},n=function(){var a=k()._results;"asc"==$("#channel-sort").val()?($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#channel-sort").empty(),$("#channel-sort").append('Sender <span id="hot-new-sort-up" class="glyphicon glyphicon-chevron-up"></span>'),a.sort(function(a,b){var c=a._station.toLowerCase(),d=b._station.toLowerCase();return d>c?-1:c>d?1:0}),$("#channel-sort").val("desc")):($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#channel-sort").empty(),$("#channel-sort").append('Sender <span id="hot-new-sort-down" class="glyphicon glyphicon-chevron-down"></span>'),a.sort(function(a,b){var c=a._station.toLowerCase(),d=b._station.toLowerCase();return d>c?1:c>d?-1:0}),$("#channel-sort").val("asc")),b.empty(),a.forEach(function(a){g(a)})},o=function(){d=k()._results,"asc"==$("#date-sort").val()?($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append('Datum <span id="hot-new-sort-up" class="glyphicon glyphicon-chevron-up"></span>'),d.sort(function(a,b){var c=a._airtime.toLowerCase(),d=b._airtime.toLowerCase(),e=c.split(/\s|\.|\:/),c=e[2]+"-"+e[1]+"-"+e[0],f=d.split(/\s|\.|\:/),d=f[2]+"-"+f[1]+"-"+f[0];return c=new Date(c).getTime(),d=new Date(d).getTime(),d>c?-1:c>d?1:0}),$("#date-sort").val("desc")):($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#hot-new-sort").empty(),$("#hot-new-sort").append("Hot/New"),$("#date-sort").empty(),$("#date-sort").append('Datum <span id="hot-new-sort-down" class="glyphicon glyphicon-chevron-down"></span>'),d.sort(function(a,b){var c=a._airtime.toLowerCase(),d=b._airtime.toLowerCase(),e=c.split(/\s|\.|\:/),c=e[2]+"-"+e[1]+"-"+e[0],f=d.split(/\s|\.|\:/),d=f[2]+"-"+f[1]+"-"+f[0];return c=new Date(c).getTime(),d=new Date(d).getTime(),d>c?1:c>d?-1:0}),$("#date-sort").val("asc")),b.empty(),d.forEach(function(a){g(a)})},p=function(){d=k()._results,console.log("hot-new-sort results from localstorage: ",d),"asc"==$("#hot-new-sort").val()?($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#hot-new-sort").empty(),$("#hot-new-sort").append('Hot/New <span id="hot-new-sort-up" class="glyphicon glyphicon-chevron-up"></span>'),d.sort(function(a,b){var c=a._origin._badge.toLowerCase(),d=b._origin._badge.toLowerCase();return d>c?-1:c>d?1:0}),$("#hot-new-sort").val("desc")):($("#alphabetic-sort").empty(),$("#alphabetic-sort").append("Alphabetisch"),$("#duration-sort").empty(),$("#duration-sort").append("Dauer"),$("#channel-sort").empty(),$("#channel-sort").append("Sender"),$("#date-sort").empty(),$("#date-sort").append("Datum"),$("#hot-new-sort").empty(),$("#hot-new-sort").append('Hot/New <span id="hot-new-sort-down" class="glyphicon glyphicon-chevron-down"></span>'),d.sort(function(a,b){var c=a._origin._badge.toLowerCase(),d=b._origin._badge.toLowerCase();return d>c?1:c>d?-1:0}),$("#hot-new-sort").val("asc")),b.empty(),console.log("hot-new-sort sorted results: ",d),d.forEach(function(a){g(a)})},q=function(a){var b="";return a=a.toLowerCase(),a.indexOf("erste")>-1&&(b+='<img class="channel-img" src="/css/images/s_Das_Erste_2014.png" />'),a.indexOf("zdf")>-1&&(b+='<img class="channel-img" src="/css/images/s_ZDF.png" />'),a.indexOf("srf")>-1&&(b+='<img class="channel-img" src="/css/images/s_srf.png" />'),a.indexOf("arte")>-1&&(b+='<img class="channel-img" src="/css/images/s_Arte.png" />'),a.indexOf("br")>-1&&(b+='<img class="channel-img" src="/css/images/s_br.png" />'),a.indexOf("orf")>-1&&(b+='<img class="channel-img" src="/css/images/s_ORF_logo.png" />'),b+=""},r=function(a){$("#icon-station").tooltip(),a=a.toLowerCase(),a.indexOf("erste")>-1&&$("#icon-station-results").append("<img src='/css/images/Das_Erste_2014.svg' />"),a.indexOf("zdf")>-1&&$("#icon-station-results").append("<img src='/css/images/ZDF.svg' />"),a.indexOf("srf")>-1&&$("#icon-station-results").append("<img src='/css/images/srf.svg' />"),a.indexOf("arte")>-1&&$("#icon-station-results").append("<img src='/css/images/Arte.svg' />"),a.indexOf("br")>-1&&$("#icon-station-results").append("<img src='/css/images/br.svg' />"),a.indexOf("orf")>-1&&$("#icon-station-results").append("<img src='/css/images/ORF_logo.svg' />")},s=function(){a={}};return a.init=f,a.dispose=s,a.appendResult=g,a.fillSlider=j,a};