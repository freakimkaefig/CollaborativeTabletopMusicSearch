MediathekCrawler.SearchView=function(){var a={},b=0,c=function(){m(),k(),$("#channel-filter").on("change",i),$("#reset").click(function(){h()}),g(),$("#mobile-filter-button").on("click",e),$("#submit").on("click",d),$("#search-button").on("click",d),$("#search-button-mobile").on("click",d)},d=function(){$("#sort-buttons").hasClass("hidden")&&($("#sort-buttons").removeClass("hidden"),$("#sort-buttons").show())},e=function(){$(this).hasClass("open")?($("#mobile-search-form").animate({height:0},300),$(this).removeClass("open"),$(this).find("span.glyphicon").removeClass("glyphicon-chevron-up"),$(this).find("span.glyphicon").addClass("glyphicon-chevron-down"),$("#mobile-search-results").show()):($("#mobile-search-form").animate({height:"100%"},300),$(this).addClass("open"),$(this).find("span.glyphicon").removeClass("glyphicon-chevron-down"),$(this).find("span.glyphicon").addClass("glyphicon-chevron-up"))},f=function(){$mobileFilter=$("#mobile-filter-button"),$mobileFilter.hasClass("open")&&($("#mobile-search-form").animate({height:0},300),$mobileFilter.removeClass("open"),$mobileFilter.find("span.glyphicon").removeClass("glyphicon-chevron-up"),$mobileFilter.find("span.glyphicon").addClass("glyphicon-chevron-down"),$("#mobile-search-results").show())},g=function(){$("input[name='orf']").click(function(){$("#datepicker-from").attr("disabled")?($("#datepicker-from").removeAttr("disabled"),$("#datepicker-to").removeAttr("disabled"),$("#datepicker-from").removeClass("ui-state-disabled"),$("#datepicker-to").removeClass("ui-state-disabled")):($("#datepicker-from").attr("disabled","disabled"),$("#datepicker-to").attr("disabled","disabled"),$("#datepicker-from").addClass("ui-state-disabled"),$("#datepicker-to").addClass("ui-state-disabled"))}),$("input[name='srf']").change(function(){$("input[name='srf']").is(":checked")?$("#duration-slider").slider("disable"):$("#duration-slider").slider("enable")})},h=function(){$("input").prop("checked",!1),$("#datepicker-from").datepicker("setDate",null),$("#datepicker-to").datepicker("setDate",null),$("#duration-slider").slider("value",0),$("#duration-display").text("0min")},i=function(){var a=[];return $("#channel-filter input:checked").each(function(){a.push($(this).attr("name"))}),a},j=function(){var a=[];return $("#category-filter input:checked").each(function(){a.push($(this).attr("name"))}),a},k=function(){$("#duration-slider").slider({min:0,max:90,step:10}),$("#duration-slider").on("slidestop",function(){l(),b=$("#duration-slider").slider("value"),$("#duration-display").text(l()+"min")})},l=function(){return b=$("#duration-slider").slider("value")},m=function(){$("#datepicker-from").datepicker({maxDate:0,minDate:"-30d",dateFormat:"dd-mm-yy",monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"]}),$("#datepicker-to").datepicker({maxDate:0,dateFormat:"dd-mm-yy",monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"]}),$("#datepicker-from").on("change",function(){$("#datepicker-to").removeAttr("disabled"),minDate=$("#datepicker-from").datepicker("getDate"),$("#datepicker-to").datepicker("option","minDate",minDate),sevenDaysBeforeToday=new Date,sevenDaysBeforeToday.setDate(sevenDaysBeforeToday.getDate()-7),maxDate=$("#datepicker-from").datepicker("getDate"),maxDate>sevenDaysBeforeToday?(today=new Date,maxDate.setDate(today.getDate())):maxDate.setDate(maxDate.getDate()+7),$("#datepicker-to").datepicker("option","maxDate",maxDate),$("#datepicker-to").datepicker("setDate",minDate)})},n=function(){if($("#datepicker-from").datepicker("getDate")){var a=$("#datepicker-from").datepicker("getDate");void 0==a&&(a=$("#datepicker-to").datepicker("getDate")),year=a.getFullYear(),month=a.getMonth()+1,month=10>month?"0"+month:""+month,day=a.getDate(),day=10>day?"0"+day:""+day,date=year+"-"+month+"-"+day}else date="";return date},o=function(){if($("#datepicker-to").datepicker("getDate")){var a=$("#datepicker-to").datepicker("getDate");year=a.getFullYear(),month=a.getMonth()+1,month=10>month?"0"+month:""+month,day=a.getDate(),day=10>day?"0"+day:""+day,date=year+"-"+month+"-"+day}else{if(void 0==a){if(!$("#datepicker-from").datepicker("getDate"))return date="",void 0;a=$("#datepicker-from").datepicker("getDate")}year=a.getFullYear(),month=a.getMonth()+1,month=10>month?"0"+month:""+month,day=a.getDate(),day=10>day?"0"+day:""+day,date=year+"-"+month+"-"+day}return date},p=function(){a={}};return a.init=c,a.collapseMobileFilter=f,a.getSelectedChannels=i,a.getSelectedCategories=j,a.getDateFrom=n,a.getDateTo=o,a.getSliderValue=l,a.dispose=p,a};